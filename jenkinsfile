node {
    def app
    stage('Clone repository') {
        checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'e98601b5-50d9-49e0-bbb7-7e6492a28c02', url: 'https://github.com/Guyazulay2/zip_job.git']]])
    }

    stage('Build') {
       app = docker.build("zip_job/Dockerfile")
    }

    stage('Run script') {
  
        app.inside {
            sh 'cd /tmp && python3 /tmp/zip_job.py'
        }
    }
    
    stage('Upload') {
  
        app.inside {
            echo 'Hello'
        }
    }
    
    stage('Push image') {
        echo "Helloooo Push"
    }
}
